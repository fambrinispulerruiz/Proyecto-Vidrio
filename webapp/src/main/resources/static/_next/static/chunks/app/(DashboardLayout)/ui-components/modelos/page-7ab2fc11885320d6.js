(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{6718:function(e,a,r){"use strict";var o=r(6314);a.Z=void 0;var s=o(r(984)),i=r(7437),t=(0,s.default)((0,i.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");a.Z=t},6446:function(e,a,r){"use strict";var o=r(6314);a.Z=void 0;var s=o(r(984)),i=r(7437),t=(0,s.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");a.Z=t},5588:function(e,a,r){Promise.resolve().then(r.bind(r,9720))},8312:function(e,a,r){"use strict";var o=r(7437);r(2265);var s=r(5133),i=r(8469),t=r(3226),l=r(3457),n=r(6507);a.Z=e=>{let{title:a,subtitle:r,children:c,action:d,footer:h,cardheading:p,headtitle:x,headsubtitle:u,middlecontent:j}=e;return(0,o.jsxs)(s.Z,{sx:{padding:0},elevation:9,variant:void 0,children:[p?(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(t.Z,{variant:"h4",children:x}),(0,o.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:u})]}):(0,o.jsxs)(i.Z,{sx:{p:"30px"},children:[a?(0,o.jsxs)(l.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,o.jsxs)(n.Z,{children:[a?(0,o.jsx)(t.Z,{variant:"h4",children:a}):"",r?(0,o.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:r}):""]}),d]}):null,c]}),j,h]})}},9720:function(e,a,r){"use strict";r.r(a);var o=r(7437),s=r(2265),i=r(8874),t=r(6507),l=r(3724),n=r(9394),c=r(1797),d=r(6337),h=r(3457),p=r(4081),x=r(2510),u=r(4997),j=r(4309),m=r(1975),v=r(2834),Z=r(3701),f=r(6988),g=r(8489),b=r(666),C=r(9279),E=r(3391),y=r(6446),k=r(9108),w=r(4273),z=r(8312),A=r(6718);a.default=()=>{let[e,a]=(0,s.useState)([]),[r,M]=(0,s.useState)([]),[S,T]=(0,s.useState)({id:"",nombre:"",empresa_id:""}),[_,N]=(0,s.useState)(!1),[P,B]=(0,s.useState)(!1),[I,O]=(0,s.useState)(null),[D,F]=(0,s.useState)(!1),[V,G]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=async()=>{try{let e="Basic "+btoa("sven:pass"),r=await fetch("http://localhost:8080/restful/services/simple.Modelos/actions/verModelos/invoke",{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}}),o=await r.json();console.log(o),a(o)}catch(e){console.error("Error al realizar la solicitud:",e)}};e()},[]),(0,s.useEffect)(()=>{let e=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/services/simple.Empresas/actions/VerEmpresas/invoke",{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}}),r=await a.json();console.log(r),M(r)}catch(e){console.error("Error al realizar la solicitud:",e)}};e()},[]);let W=()=>{N(!1)},H=()=>{B(!1)},J=e=>{if("target"in e){let{name:a,value:r}=e.target;console.log("TextField Change - name: ".concat(a,", value: ").concat(r)),T(e=>({...e,[a||""]:r}))}else{var a;let r=(null===(a=e.target)||void 0===a?void 0:a.value)||"";console.log("Select Change - selectedValue: ".concat(r)),T(e=>({...e,tipoEmpresa:r}))}},U=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/objects/vidrios.Empresa/".concat(S.empresa_id,"/actions/agregarModelo/invoke"),{method:"PUT",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"},body:JSON.stringify({nombre:{value:S.nombre}})});a.ok?window.location.reload():console.error("Error al enviar datos a la base de datos.")}catch(e){console.error("Error al realizar la solicitud:",e)}},L=async e=>{try{let a="Basic "+btoa("sven:pass"),r=await fetch("http://localhost:8080/restful/objects/modelos.Modelo/".concat(e.id),{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:a,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}});if(r.ok){let a=await r.json(),o=a.empresa.href.split("/").pop();T({id:a.id,nombre:a.nombre,empresa_id:o}),O(e.id),B(!0)}else console.error("Error al obtener los datos de la empresa")}catch(e){console.error("Error al realizar la solicitud:",e)}},q=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/objects/modelos.Modelo/".concat(S.id,"/actions/updateName/invoke"),{method:"PUT",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"},body:JSON.stringify({nombre:{value:S.nombre}})});a.ok?window.location.reload():console.error("Error al enviar datos a la base de datos.")}catch(e){console.error("Error al realizar la solicitud:",e)}},K=async(e,a)=>{try{let r="http://localhost:8080/restful/objects/modelos.Modelo/".concat(e,"/actions/").concat(a?"delete":"activar","/invoke"),o="Basic "+btoa("sven:pass"),s=await fetch(r,{method:"POST",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:o,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}});s.ok?G('Acci\xf3n "'.concat(a?"Desactivar":"Activar",'" completada con \xe9xito')):G("Error al realizar la acci\xf3n: ".concat(s.statusText)),F(!0)}catch(e){G("Error al realizar la solicitud"),F(!0)}};return(0,o.jsx)(i.ZP,{container:!0,spacing:0,children:(0,o.jsxs)(i.ZP,{item:!0,xs:12,lg:12,children:[(0,o.jsxs)(t.Z,{display:"flex",justifyContent:"space-between",children:[(0,o.jsx)(l.Z,{variant:"contained",sx:{margin:"20px"},onClick:()=>{N(!0)},children:"Agregar Modelo"}),(0,o.jsx)(l.Z,{variant:"contained",sx:{margin:"20px",backgroundColor:w.Z[500],"&:hover":{backgroundColor:w.Z[700]}},startIcon:(0,o.jsx)(k.Z,{}),onClick:()=>{},children:"Exportar a PDF"})]}),(0,o.jsxs)(n.Z,{open:_,onClose:W,children:[(0,o.jsx)(c.Z,{children:"Agregar Modelo"}),(0,o.jsx)(d.Z,{sx:{width:"600px",textAlign:"center"},children:(0,o.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,o.jsx)(z.Z,{title:"Complete el Formulario del Modelo",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(h.Z,{spacing:3,children:[(0,o.jsxs)(p.Z,{fullWidth:!0,children:[(0,o.jsx)(x.Z,{id:"modelo-label",children:"Empresa"}),(0,o.jsx)(u.Z,{labelId:"empresa-label",id:"empresa",name:"empresa_id",label:"Empresa",value:S.empresa_id,onChange:e=>T({...S,empresa_id:e.target.value}),children:r.map(e=>(0,o.jsx)(j.Z,{value:e.id,children:e.name},e.id))})]}),(0,o.jsx)(m.Z,{id:"nombre",name:"nombre",label:"Nombre",variant:"outlined",fullWidth:!0,value:S.nombre,onChange:J})]}),(0,o.jsx)("br",{}),(0,o.jsx)(l.Z,{onClick:U,children:"Cargar"})]})})})}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(l.Z,{onClick:W,children:"Cancelar"})})]}),(0,o.jsx)(z.Z,{title:"Modelos",children:(0,o.jsxs)(Z.Z,{children:[(0,o.jsx)(f.Z,{children:(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(b.Z,{children:"ID"}),(0,o.jsx)(b.Z,{children:"Nombre"}),(0,o.jsx)(b.Z,{children:"Empresa"}),(0,o.jsx)(b.Z,{children:"Activo"}),(0,o.jsx)(b.Z,{children:"Acciones"})]})}),(0,o.jsx)(C.Z,{children:e.map(e=>(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(b.Z,{children:e.id}),(0,o.jsx)(b.Z,{children:e.nombre}),(0,o.jsx)(b.Z,{children:e.empresa.title}),(0,o.jsx)(b.Z,{children:e.activo?"S\xed":"No"}),(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(l.Z,{startIcon:(0,o.jsx)(E.Z,{}),color:"primary",onClick:()=>L(e),children:"Editar"})," ",(0,o.jsxs)(n.Z,{open:P,onClose:H,children:[(0,o.jsx)(c.Z,{children:"Editar Modelo"}),(0,o.jsx)(d.Z,{sx:{width:"600px",textAlign:"center"},children:(0,o.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,o.jsx)(z.Z,{title:"Editar Modelo",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{spacing:3,children:(0,o.jsx)(m.Z,{id:"nombre",name:"nombre",label:"Nombre",variant:"outlined",fullWidth:!0,value:S.nombre,onChange:J})}),(0,o.jsx)("br",{}),(0,o.jsx)(l.Z,{onClick:q,children:"Confirmar Edici\xf3n"})]})})})}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(l.Z,{onClick:H,children:"Cancelar"})})]}),(0,o.jsx)(l.Z,{startIcon:e.activo?(0,o.jsx)(y.Z,{}):(0,o.jsx)(A.Z,{}),color:e.activo?"secondary":"success",onClick:()=>K(e.id,e.activo),children:e.activo?"Desactivar":"Activar"}),(0,o.jsx)(n.Z,{open:D,onClose:()=>F(!1),children:(0,o.jsxs)(d.Z,{children:[V,(0,o.jsx)(l.Z,{onClick:()=>window.location.reload(),children:"Aceptar"})]})})]})]},e.id))})]})})]})})}}},function(e){e.O(0,[370,468,238,874,659,984,195,413,215,869,971,596,744],function(){return e(e.s=5588)}),_N_E=e.O()}]);