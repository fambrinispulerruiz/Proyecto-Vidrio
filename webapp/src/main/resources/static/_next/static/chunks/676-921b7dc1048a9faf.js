"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{6676:function(e,r,o){var a=o(7437),n=o(2265),l=o(5795),t=o(3701),i=o(6988),s=o(8489),d=o(666),c=o(3226),h=o(9279),u=o(6507),x=o(7827),p=o(3724),j=o(9394),f=o(1797),g=o(6337),Z=o(8874),y=o(3457),v=o(1975),b=o(182),m=o(1469),k=o(2834),S=o(3878),A=o(3391);r.Z=()=>{let[e,r]=(0,n.useState)([]),[o,C]=(0,n.useState)(!1),[w,O]=(0,n.useState)(null),[E,z]=(0,n.useState)(null),[I,_]=(0,n.useState)({id:"",nombreAsegurado:"",patente:"",estado:"",propio:"",aseguradora:"",fecha:"",hora:"",telefonoAsegurado:"",vidrio_id:"",vidrio_nombre:"",nro_siniestro:"",orden:"",observaciones:""}),[P,T]=(0,n.useState)(!1),[W,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{try{let e="Basic "+btoa("sven:pass"),o=await fetch("http://localhost:8080/restful/services/simple.OrdenDeTrabajos/actions/verOrdenesDeTrabajo/invoke",{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}}),a=await o.json(),n=a.sort((e,r)=>{let o={"Sin Atender":1,Atendido:2,"Finalizado Y Entregado":3};return o[e.estado]-o[r.estado]});r(n)}catch(e){console.error("Error al realizar la solicitud:",e)}};e()},[]);let F=e=>{switch(e){case"Sin Atender":return"error.main";case"Atendido":return"primary.main";case"Finalizado Y Entregado":return"success.main";default:return""}},B=()=>{C(!1)},N=async e=>{try{let r="Basic "+btoa("sven:pass"),o=await fetch("http://localhost:8080/restful/objects/simple.OrdenDeTrabajo/".concat(e.id),{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:r,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}});if(o.ok){let r=await o.json(),a=r.vidrio.href.split("/").pop();_({id:r.id,nombreAsegurado:r.nombreAsegurado,patente:r.patente,estado:r.estado,propio:r.propio,aseguradora:r.aseguradora,fecha:r.fecha,hora:r.fecha,telefonoAsegurado:r.telefonoAsegurado,vidrio_id:a,vidrio_nombre:r.vidrio.title,nro_siniestro:r.nroSiniestro,orden:r.orden,observaciones:r.observaciones}),O(e.id),C(!0)}else console.error("Error al obtener los datos de la empresa")}catch(e){console.error("Error al realizar la solicitud:",e)}},V=e=>{T(!0),z(e)},L=()=>{T(!1)},G=e=>{console.log(e),D(e)},H=async(e,r)=>{try{let o="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/objects/simple.OrdenDeTrabajo/".concat(r,"/actions/cambiarEstadoDeLaOrden/invoke"),{method:"PUT",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:o,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"},body:JSON.stringify({estado:{value:e}})});a.ok?window.location.reload():console.error("Error al enviar datos a la base de datos.")}catch(e){console.error("Error al realizar la solicitud:",e)}};return(0,a.jsx)(S.Z,{title:"Historico de Ordenes",children:(0,a.jsx)(l.Z,{sx:{width:{xs:"274px",sm:"100%"}},children:(0,a.jsxs)(t.Z,{"aria-label":"simple table",sx:{whiteSpace:"nowrap",mt:2},children:[(0,a.jsx)(i.Z,{children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Id"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Vidrio"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Asegurado"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Fecha"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Patente"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Estado"})}),(0,a.jsx)(d.Z,{align:"center",children:(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:"Acciones"})})]})}),(0,a.jsx)(h.Z,{children:e.map(e=>(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(c.Z,{fontSize:"15px",fontWeight:500,children:e.id})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(c.Z,{fontSize:"15px",fontWeight:500,children:e.vidrio.title})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{display:"flex",alignItems:"center",children:(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(c.Z,{variant:"h6",fontWeight:600,children:e.nombreAsegurado}),(0,a.jsx)(c.Z,{color:"textSecondary",fontSize:"13px",children:e.telefonoAsegurado}),(0,a.jsx)(c.Z,{color:"textSecondary",fontSize:"13px",children:e.aseguradora})]})})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{display:"flex",alignItems:"center",children:(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(c.Z,{color:"textSecondary",variant:"h6",children:new Date(e.fecha).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,a.jsx)(c.Z,{color:"textSecondary",fontSize:"13px",children:new Date(e.fecha).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{display:"flex",alignItems:"center",children:(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(c.Z,{variant:"h6",fontWeight:600,children:e.patente}),(0,a.jsx)(c.Z,{color:"textSecondary",fontSize:"13px",children:e.propio})]})})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(x.Z,{sx:{pl:"4px",pr:"4px",backgroundColor:F(e.estado),color:"#fff"},size:"small",label:e.estado})}),(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(p.Z,{startIcon:(0,a.jsx)(A.Z,{}),color:"secondary",style:{margin:"-10px"},onClick:()=>N(e),children:"Ver Datos"}),(0,a.jsxs)(j.Z,{open:o,onClose:B,children:[(0,a.jsx)(f.Z,{children:"Datos de la Orden"}),(0,a.jsx)(g.Z,{sx:{width:"600px",textAlign:"center"},children:(0,a.jsx)(Z.ZP,{item:!0,xs:12,lg:12,children:(0,a.jsx)(S.Z,{title:"Orden #"+I.id,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y.Z,{spacing:3,children:[(0,a.jsx)(v.Z,{id:"vidrio",label:"Vidrio a colocar",value:I.vidrio_nombre,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"fecha",label:"Fecha de realizaci\xf3n",type:"date",variant:"outlined",fullWidth:!0,value:I.fecha?I.fecha.split(" ")[0]:"",InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"hora",label:"Hora",type:"time",variant:"outlined",fullWidth:!0,value:I.hora?I.hora.split(" ")[1]:"",InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"nombreAsegurado",label:"Nombre del Asegurado",variant:"outlined",fullWidth:!0,value:I.nombreAsegurado,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"telefonoAsegurado",label:"Tel\xe9fono del Asegurado",variant:"outlined",fullWidth:!0,value:I.telefonoAsegurado,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{fullWidth:!0,id:"aseguradora",label:"Aseguradora",name:"aseguradora",value:I.aseguradora,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"nroSiniestro",label:"Nro Siniestro",variant:"outlined",fullWidth:!0,value:I.nro_siniestro,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(b.Z,{control:(0,a.jsx)(m.Z,{checked:"Si"===I.orden,inputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),label:"\xbfTrae orden del seguro?"}),(0,a.jsx)(v.Z,{id:"patente",label:"Patente",variant:"outlined",fullWidth:!0,value:I.patente,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{fullWidth:!0,id:"propio",label:"Vehiculo",variant:"outlined",value:I.propio,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{id:"observaciones",label:"Observaciones",multiline:!0,rows:4,variant:"outlined",fullWidth:!0,value:I.observaciones,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}}),(0,a.jsx)(v.Z,{fullWidth:!0,id:"estado",label:"Estado de la Orden",value:I.estado,InputProps:{readOnly:!0,style:{color:"darkslategray",backgroundColor:"#f2f2f2",cursor:"not-allowed"}}})]}),(0,a.jsx)("br",{}),(0,a.jsx)(p.Z,{startIcon:(0,a.jsx)(A.Z,{}),color:"secondary",onClick:()=>V(I.id),children:"Cambiar Estado de la Orden"}),(0,a.jsxs)(j.Z,{open:P,onClose:L,children:[(0,a.jsx)(f.Z,{children:"Datos de la Orden"}),(0,a.jsx)(g.Z,{children:(0,a.jsx)(Z.ZP,{children:(0,a.jsx)(S.Z,{title:"Cambiar Estado",children:(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"10px"},children:[(0,a.jsx)(p.Z,{onClick:()=>G("Sin_Atender"),color:"secondary",variant:"Sin_Atender"===W?"contained":"outlined",style:{marginBottom:"10px"},children:"Sin Atender"}),(0,a.jsx)("br",{}),(0,a.jsx)(p.Z,{onClick:()=>G("Atendido"),color:"warning",variant:"Atendido"===W?"contained":"outlined",style:{marginBottom:"10px"},children:"Atendido"}),(0,a.jsx)("br",{}),(0,a.jsx)(p.Z,{onClick:()=>G("Finalizado_y_Entregado"),color:"success",variant:"Finalizado_y_Entregado"===W?"contained":"outlined",style:{marginBottom:"10px"},children:"Finalizado y Entregado"})]})})})}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(p.Z,{onClick:()=>null!==W&&H(W,E),children:"Aceptar"}),(0,a.jsx)(p.Z,{onClick:L,children:"Cancelar"})]})]})]})})})}),(0,a.jsx)(k.Z,{children:(0,a.jsx)(p.Z,{onClick:B,children:"Cerrar"})})]})]})]},e.id))})]})})})}},3878:function(e,r,o){var a=o(7437);o(2265);var n=o(5133),l=o(8469),t=o(3226),i=o(3457),s=o(6507);r.Z=e=>{let{title:r,subtitle:o,children:d,action:c,footer:h,cardheading:u,headtitle:x,headsubtitle:p,middlecontent:j}=e;return(0,a.jsxs)(n.Z,{sx:{padding:0},elevation:9,variant:void 0,children:[u?(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(t.Z,{variant:"h3",children:x}),(0,a.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:p})]}):(0,a.jsxs)(l.Z,{sx:{p:"30px"},children:[r?(0,a.jsxs)(i.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,a.jsxs)(s.Z,{children:[r?(0,a.jsx)(t.Z,{variant:"h3",children:r}):"",o?(0,a.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:o}):""]}),c]}):null,d]}),j,h]})}}}]);