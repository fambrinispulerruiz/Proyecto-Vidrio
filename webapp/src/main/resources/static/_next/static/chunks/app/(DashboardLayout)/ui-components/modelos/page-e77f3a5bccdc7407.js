(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{6718:function(e,a,r){"use strict";var s=r(6314);a.Z=void 0;var o=s(r(984)),i=r(7437),t=(0,o.default)((0,i.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");a.Z=t},6446:function(e,a,r){"use strict";var s=r(6314);a.Z=void 0;var o=s(r(984)),i=r(7437),t=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");a.Z=t},3391:function(e,a,r){"use strict";var s=r(6314);a.Z=void 0;var o=s(r(984)),i=r(7437),t=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.Z=t},5588:function(e,a,r){Promise.resolve().then(r.bind(r,9720))},8312:function(e,a,r){"use strict";var s=r(7437);r(2265);var o=r(5133),i=r(8469),t=r(3226),l=r(3457),n=r(6507);a.Z=e=>{let{title:a,subtitle:r,children:c,action:d,footer:h,cardheading:p,headtitle:u,headsubtitle:x,middlecontent:j}=e;return(0,s.jsxs)(o.Z,{sx:{padding:0},elevation:9,variant:void 0,children:[p?(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(t.Z,{variant:"h4",children:u}),(0,s.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:x})]}):(0,s.jsxs)(i.Z,{sx:{p:"30px"},children:[a?(0,s.jsxs)(l.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,s.jsxs)(n.Z,{children:[a?(0,s.jsx)(t.Z,{variant:"h4",children:a}):"",r?(0,s.jsx)(t.Z,{variant:"subtitle2",color:"textSecondary",children:r}):""]}),d]}):null,c]}),j,h]})}},9720:function(e,a,r){"use strict";r.r(a);var s=r(7437),o=r(2265),i=r(8874),t=r(6507),l=r(3724),n=r(9394),c=r(1797),d=r(6337),h=r(3457),p=r(4081),u=r(2510),x=r(4997),j=r(4309),v=r(1975),Z=r(2834),m=r(3701),f=r(6988),g=r(8489),b=r(666),C=r(9279),E=r(3391),y=r(6446),k=r(9108),w=r(4273),z=r(8312),M=r(6718);a.default=()=>{let[e,a]=(0,o.useState)([]),[r,A]=(0,o.useState)([]),[S,T]=(0,o.useState)({id:"",nombre:"",empresa_id:""}),[_,N]=(0,o.useState)(!1),[P,B]=(0,o.useState)(!1),[I,O]=(0,o.useState)(null),[D,F]=(0,o.useState)(!1),[V,G]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=async()=>{try{let e="Basic "+btoa("sven:pass"),r=await fetch("http://localhost:8080/restful/services/simple.Modelos/actions/verModelos/invoke",{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}}),s=await r.json();console.log(s),a(s)}catch(e){console.error("Error al realizar la solicitud:",e)}};e()},[]),(0,o.useEffect)(()=>{let e=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/services/simple.Empresas/actions/VerEmpresas/invoke",{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}}),r=await a.json();console.log(r),A(r)}catch(e){console.error("Error al realizar la solicitud:",e)}};e()},[]);let L=()=>{N(!1)},W=()=>{B(!1)},H=e=>{if("target"in e){let{name:a,value:r}=e.target;console.log("TextField Change - name: ".concat(a,", value: ").concat(r)),T(e=>({...e,[a||""]:r}))}else{var a;let r=(null===(a=e.target)||void 0===a?void 0:a.value)||"";console.log("Select Change - selectedValue: ".concat(r)),T(e=>({...e,tipoEmpresa:r}))}},J=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/objects/vidrios.Empresa/".concat(S.empresa_id,"/actions/agregarModelo/invoke"),{method:"PUT",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"},body:JSON.stringify({nombre:{value:S.nombre}})});a.ok?window.location.reload():console.error("Error al enviar datos a la base de datos.")}catch(e){console.error("Error al realizar la solicitud:",e)}},U=async e=>{try{let a="Basic "+btoa("sven:pass"),r=await fetch("http://localhost:8080/restful/objects/modelos.Modelo/".concat(e.id),{method:"GET",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:a,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}});if(r.ok){let a=await r.json(),s=a.empresa.href.split("/").pop();T({id:a.id,nombre:a.nombre,empresa_id:s}),O(e.id),B(!0)}else console.error("Error al obtener los datos de la empresa")}catch(e){console.error("Error al realizar la solicitud:",e)}},q=async()=>{try{let e="Basic "+btoa("sven:pass"),a=await fetch("http://localhost:8080/restful/objects/modelos.Modelo/".concat(S.id,"/actions/updateName/invoke"),{method:"PUT",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:e,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"},body:JSON.stringify({nombre:{value:S.nombre}})});a.ok?window.location.reload():console.error("Error al enviar datos a la base de datos.")}catch(e){console.error("Error al realizar la solicitud:",e)}},K=async(e,a)=>{try{let r="http://localhost:8080/restful/objects/modelos.Modelo/".concat(e,"/actions/").concat(a?"delete":"activar","/invoke"),s="Basic "+btoa("sven:pass"),o=await fetch(r,{method:"POST",headers:{"Content-Type":'application/json;profile="urn:org.apache.isis"',Authorization:s,accept:"application/json;profile=urn:org.apache.isis/v2;suppress=all"}});o.ok?G('Acci\xf3n "'.concat(a?"Desactivar":"Activar",'" completada con \xe9xito')):G("Error al realizar la acci\xf3n: ".concat(o.statusText)),F(!0)}catch(e){G("Error al realizar la solicitud"),F(!0)}};return(0,s.jsx)(i.ZP,{container:!0,spacing:0,children:(0,s.jsxs)(i.ZP,{item:!0,xs:12,lg:12,children:[(0,s.jsxs)(t.Z,{display:"flex",justifyContent:"space-between",children:[(0,s.jsx)(l.Z,{variant:"contained",sx:{margin:"20px"},onClick:()=>{N(!0)},children:"Agregar Modelo"}),(0,s.jsx)(l.Z,{variant:"contained",sx:{margin:"20px",backgroundColor:w.Z[500],"&:hover":{backgroundColor:w.Z[700]}},startIcon:(0,s.jsx)(k.Z,{}),onClick:()=>{},children:"Exportar a PDF"})]}),(0,s.jsxs)(n.Z,{open:_,onClose:L,children:[(0,s.jsx)(c.Z,{children:"Agregar Modelo"}),(0,s.jsx)(d.Z,{sx:{width:"600px",textAlign:"center"},children:(0,s.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,s.jsx)(z.Z,{title:"Complete el Formulario del Modelo",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.Z,{spacing:3,children:[(0,s.jsxs)(p.Z,{fullWidth:!0,children:[(0,s.jsx)(u.Z,{id:"modelo-label",children:"Empresa"}),(0,s.jsx)(x.Z,{labelId:"empresa-label",id:"empresa",name:"empresa_id",label:"Empresa",value:S.empresa_id,onChange:e=>T({...S,empresa_id:e.target.value}),children:r.map(e=>(0,s.jsx)(j.Z,{value:e.id,children:e.name},e.id))})]}),(0,s.jsx)(v.Z,{id:"nombre",name:"nombre",label:"Nombre",variant:"outlined",fullWidth:!0,value:S.nombre,onChange:H})]}),(0,s.jsx)("br",{}),(0,s.jsx)(l.Z,{onClick:J,children:"Cargar"})]})})})}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(l.Z,{onClick:L,children:"Cancelar"})})]}),(0,s.jsx)(z.Z,{title:"Modelos",children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(f.Z,{children:(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(b.Z,{children:"ID"}),(0,s.jsx)(b.Z,{children:"Nombre"}),(0,s.jsx)(b.Z,{children:"Empresa"}),(0,s.jsx)(b.Z,{children:"Activo"}),(0,s.jsx)(b.Z,{children:"Acciones"})]})}),(0,s.jsx)(C.Z,{children:e.map(e=>(0,s.jsxs)(g.Z,{children:[(0,s.jsx)(b.Z,{children:e.id}),(0,s.jsx)(b.Z,{children:e.nombre}),(0,s.jsx)(b.Z,{children:e.empresa.title}),(0,s.jsx)(b.Z,{children:e.activo?"S\xed":"No"}),(0,s.jsxs)(b.Z,{children:[(0,s.jsx)(l.Z,{startIcon:(0,s.jsx)(E.Z,{}),color:"primary",onClick:()=>U(e),children:"Editar"})," ",(0,s.jsxs)(n.Z,{open:P,onClose:W,children:[(0,s.jsx)(c.Z,{children:"Editar Modelo"}),(0,s.jsx)(d.Z,{sx:{width:"600px",textAlign:"center"},children:(0,s.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,s.jsx)(z.Z,{title:"Editar Modelo",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{spacing:3,children:(0,s.jsx)(v.Z,{id:"nombre",name:"nombre",label:"Nombre",variant:"outlined",fullWidth:!0,value:S.nombre,onChange:H})}),(0,s.jsx)("br",{}),(0,s.jsx)(l.Z,{onClick:q,children:"Confirmar Edici\xf3n"})]})})})}),(0,s.jsx)(Z.Z,{children:(0,s.jsx)(l.Z,{onClick:W,children:"Cancelar"})})]}),(0,s.jsx)(l.Z,{startIcon:e.activo?(0,s.jsx)(y.Z,{}):(0,s.jsx)(M.Z,{}),color:e.activo?"secondary":"success",onClick:()=>K(e.id,e.activo),children:e.activo?"Desactivar":"Activar"}),(0,s.jsx)(n.Z,{open:D,onClose:()=>F(!1),children:(0,s.jsxs)(d.Z,{children:[V,(0,s.jsx)(l.Z,{onClick:()=>window.location.reload(),children:"Aceptar"})]})})]})]},e.id))})]})})]})})}}},function(e){e.O(0,[370,468,238,874,659,756,413,798,869,971,596,744],function(){return e(e.s=5588)}),_N_E=e.O()}]);